#!/usr/bin/python3

# wpa_cli scraper for my tint2 bar
# Usage: 
# -i: output icon path
# -v: verbose... kinda?
# 
# - Spd

import sys

status = sys.stdin.read().split("\n")

connected = False
ssid = "Unknown"

for line in status:
    a = line.split("=")
    if len(a) > 1:
        name = a[0]
        if (name == "wpa_state") and (a[1] == "COMPLETED"):
            connected = True
        elif name == "ssid":
            ssid = "=".join(a[1:])

if "-v" in sys.argv:
    output = "Connected to " + ssid if connected else "Not connected"
else:
    output = "Wifi up" if connected else "Wifi down"

if "-i" in sys.argv:
    output = "/usr/share/icons/Papirus/32x32/devices/network-wireless.svg\n" + output

print(output)
